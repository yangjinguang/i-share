"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Utils = (function () {
    function Utils() {
    }
    Utils.formatNumber = function (n) {
        var str = n.toString();
        return str[1] ? str : '0' + str;
    };
    Utils.formatTime = function (date) {
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var hour = date.getHours();
        var minute = date.getMinutes();
        var second = date.getSeconds();
        return [year, month, day].map(this.formatNumber).join('/') + ' ' + [hour, minute, second].map(this.formatNumber).join(':');
    };
    Utils.dateFormat = function (date, fmt) {
        var o = {
            'M+': date.getMonth() + 1,
            'd+': date.getDate(),
            'h+': date.getHours(),
            'm+': date.getMinutes(),
            's+': date.getSeconds(),
            'q+': Math.floor((date.getMonth() + 3) / 3),
            'S': date.getMilliseconds()
        };
        if (/(y+)/.test(fmt))
            fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));
        for (var k in o) {
            if (new RegExp('(' + k + ')').test(fmt))
                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)));
        }
        return fmt;
    };
    Utils.timeDiff = function (date) {
        var sTime = date.getTime();
        var nowTime = new Date().getTime();
        var d = (nowTime - sTime) / 1000;
        if (d < 60) {
            return Math.floor(d) + " \u79D2\u524D";
        }
        else if (d < 60 * 60) {
            return Math.floor(d / 60) + " \u5206\u949F\u524D";
        }
        else if (d < 60 * 60 * 24) {
            return Math.floor(d / 60 / 60) + " \u5C0F\u65F6\u524D";
        }
        else if (d < 60 * 60 * 24 * 7) {
            return Math.floor(d / 60 / 60 / 24) + " \u5929\u524D";
        }
        else {
            return this.dateFormat(date, 'yyyy-MM-dd hh:mm:ss');
        }
    };
    Utils.childSerialize = function () {
        var children = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            children[_i] = arguments[_i];
        }
        if (!children) {
            return;
        }
        children.map(function (i) {
            i.classView = i.grade.name + " " + i.class.name;
            return i;
        });
    };
    Utils.shareSerialize = function (alpha) {
        var _this = this;
        var shares = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            shares[_i - 1] = arguments[_i];
        }
        if (!shares) {
            return;
        }
        shares.map(function (i) {
            var s = i.media.height / i.media.width;
            if (i.media.width >= i.media.height) {
                if (i.media.width > 200) {
                    i.media.vWidth = 200 * alpha + 'px';
                    i.media.vHeight = 200 * s * alpha + 'px';
                }
            }
            else {
                if (i.media.height > 200) {
                    i.media.vHeight = 200 * alpha + 'px';
                    i.media.vWidth = 200 / s * alpha + 'px';
                }
            }
            i.timeDiff = _this.timeDiff(new Date(i.createdAt));
            i.likeUsersView = _this.usersNameStr(i.likeUsers);
            return i;
        });
    };
    Utils.usersNameStr = function (users) {
        if (!users) {
            return '';
        }
        return users.map(function (i) {
            return i.nickName;
        }).join(',');
    };
    return Utils;
}());
exports.Utils = Utils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ1dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUlBO0lBQUE7SUE4RkEsQ0FBQztJQTdGaUIsa0JBQVksR0FBMUIsVUFBMkIsQ0FBUztRQUNoQyxJQUFNLEdBQUcsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDekIsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztJQUNwQyxDQUFDO0lBRWEsZ0JBQVUsR0FBeEIsVUFBeUIsSUFBVTtRQUMvQixJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDaEMsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDM0IsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzdCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUNqQyxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFFakMsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvSCxDQUFDO0lBR2EsZ0JBQVUsR0FBeEIsVUFBeUIsSUFBVSxFQUFFLEdBQVc7UUFDNUMsSUFBTSxDQUFDLEdBQUc7WUFDTixJQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUM7WUFDekIsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDcEIsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDckIsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDdkIsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDdkIsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzNDLEdBQUcsRUFBRSxJQUFJLENBQUMsZUFBZSxFQUFFO1NBQzlCLENBQUM7UUFDRixJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUMzRyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNiLElBQUksSUFBSSxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQWlCLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBaUIsQ0FBQyxDQUFD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RyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7aUJBQzNDO2FBQ0o7WUFDRCxDQUFDLENBQUMsUUFBUSxHQUFHLEtBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDbEQsQ0FBQyxDQUFDLGFBQWEsR0FBRyxLQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNqRCxPQUFPLENBQUMsQ0FBQztRQUNiLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVhLGtCQUFZLEdBQTFCLFVBQTJCLEtBQWE7UUFDcEMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNSLE9BQU8sRUFBRSxDQUFDO1NBQ2I7UUFDRCxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQSxDQUFDO1lBQ2QsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDO1FBQ3RCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQixDQUFDO0lBQ0wsWUFBQztBQUFELENBQUMsQUE5RkQsSUE4RkM7QUE5Rlksc0JBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1NoYXJlfSBmcm9tICcuL3R5cGVzL3NoYXJlJztcbmltcG9ydCB7U3R1ZGVudH0gZnJvbSAnLi90eXBlcy9zdHVkZW50JztcbmltcG9ydCB7VXNlcn0gZnJvbSAnLi90eXBlcy91c2VyJztcblxuZXhwb3J0IGNsYXNzIFV0aWxzIHtcbiAgICBwdWJsaWMgc3RhdGljIGZvcm1hdE51bWJlcihuOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3Qgc3RyID0gbi50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gc3RyWzFdID8gc3RyIDogJzAnICsgc3RyO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0VGltZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICAgICAgY29uc3QgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgY29uc3QgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIGNvbnN0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpO1xuXG4gICAgICAgIHJldHVybiBbeWVhciwgbW9udGgsIGRheV0ubWFwKHRoaXMuZm9ybWF0TnVtYmVyKS5qb2luKCcvJykgKyAnICcgKyBbaG91ciwgbWludXRlLCBzZWNvbmRdLm1hcCh0aGlzLmZvcm1hdE51bWJlcikuam9pbignOicpO1xuICAgIH1cblxuXG4gICAgcHVibGljIHN0YXRpYyBkYXRlRm9ybWF0KGRhdGU6IERhdGUsIGZtdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbyA9IHtcbiAgICAgICAgICAgICdNKyc6IGRhdGUuZ2V0TW9udGgoKSArIDEsIC8v5pyI5Lu9XG4gICAgICAgICAgICAnZCsnOiBkYXRlLmdldERhdGUoKSwgLy/ml6VcbiAgICAgICAgICAgICdoKyc6IGRhdGUuZ2V0SG91cnMoKSwgLy/lsI/ml7ZcbiAgICAgICAgICAgICdtKyc6IGRhdGUuZ2V0TWludXRlcygpLCAvL+WIhlxuICAgICAgICAgICAgJ3MrJzogZGF0ZS5nZXRTZWNvbmRzKCksIC8v56eSXG4gICAgICAgICAgICAncSsnOiBNYXRoLmZsb29yKChkYXRlLmdldE1vbnRoKCkgKyAzKSAvIDMpLCAvL+Wto+W6plxuICAgICAgICAgICAgJ1MnOiBkYXRlLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSXG4gICAgICAgIH07XG4gICAgICAgIGlmICgvKHkrKS8udGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChkYXRlLmdldEZ1bGxZZWFyKCkgKyAnJykuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7XG4gICAgICAgIGZvciAobGV0IGsgaW4gbykge1xuICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoJygnICsgayArICcpJykudGVzdChmbXQpKSBmbXQgPSBmbXQucmVwbGFjZShSZWdFeHAuJDEsIChSZWdFeHAuJDEubGVuZ3RoID09IDEpID8gKG9bayBhcyBrZXlvZiBvYmplY3RdKSA6ICgoJzAwJyArIG9bayBhcyBrZXlvZiBvYmplY3RdKS5zdWJzdHIoKCcnICsgb1trIGFzIGtleW9mIG9iamVjdF0pLmxlbmd0aCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm10O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdGltZURpZmYoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNUaW1lID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IG5vd1RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgY29uc3QgZCA9IChub3dUaW1lIC0gc1RpbWUpIC8gMTAwMDtcbiAgICAgICAgaWYgKGQgPCA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke01hdGguZmxvb3IoZCl9IOenkuWJjWA7XG4gICAgICAgIH0gZWxzZSBpZiAoZCA8IDYwICogNjApIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtNYXRoLmZsb29yKGQgLyA2MCl9IOWIhumSn+WJjWA7XG4gICAgICAgIH0gZWxzZSBpZiAoZCA8IDYwICogNjAgKiAyNCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke01hdGguZmxvb3IoZCAvIDYwIC8gNjApfSDlsI/ml7bliY1gO1xuICAgICAgICB9IGVsc2UgaWYgKGQgPCA2MCAqIDYwICogMjQgKiA3KSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7TWF0aC5mbG9vcihkIC8gNjAgLyA2MCAvIDI0KX0g5aSp5YmNYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVGb3JtYXQoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW06c3MnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgY2hpbGRTZXJpYWxpemUoLi4uY2hpbGRyZW46IFN0dWRlbnRbXSkge1xuICAgICAgICBpZiAoIWNoaWxkcmVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGRyZW4ubWFwKGkgPT4ge1xuICAgICAgICAgICAgaS5jbGFzc1ZpZXcgPSBgJHtpLmdyYWRlLm5hbWV9ICR7aS5jbGFzcy5uYW1lfWA7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNoYXJlU2VyaWFsaXplKGFscGhhOiBudW1iZXIsIC4uLnNoYXJlczogU2hhcmVbXSkge1xuICAgICAgICBpZiAoIXNoYXJlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNoYXJlcy5tYXAoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gaS5tZWRpYS5oZWlnaHQgLyBpLm1lZGlhLndpZHRoO1xuICAgICAgICAgICAgaWYgKGkubWVkaWEud2lkdGggPj0gaS5tZWRpYS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaS5tZWRpYS53aWR0aCA+IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBpLm1lZGlhLnZXaWR0aCA9IDIwMCAqIGFscGhhICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgaS5tZWRpYS52SGVpZ2h0ID0gMjAwICogcyAqIGFscGhhICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpLm1lZGlhLmhlaWdodCA+IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBpLm1lZGlhLnZIZWlnaHQgPSAyMDAgKiBhbHBoYSArICdweCc7XG4gICAgICAgICAgICAgICAgICAgIGkubWVkaWEudldpZHRoID0gMjAwIC8gcyAqIGFscGhhICsgJ3B4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpLnRpbWVEaWZmID0gdGhpcy50aW1lRGlmZihuZXcgRGF0ZShpLmNyZWF0ZWRBdCkpO1xuICAgICAgICAgICAgaS5saWtlVXNlcnNWaWV3ID0gdGhpcy51c2Vyc05hbWVTdHIoaS5saWtlVXNlcnMpO1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgdXNlcnNOYW1lU3RyKHVzZXJzOiBVc2VyW10pOiBzdHJpbmcge1xuICAgICAgICBpZiAoIXVzZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJzLm1hcChpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBpLm5pY2tOYW1lO1xuICAgICAgICB9KS5qb2luKCcsJyk7XG4gICAgfVxufVxuIl19